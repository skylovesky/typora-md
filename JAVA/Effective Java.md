# Effective Java

## 第二章、创建和销毁对象

### 第1条：用静态工厂方法代替构造器

静态工厂方法与设计模式中的工厂方法（Factory Method）不同。

1. **静态工厂方法与构造器不同的第一大优势在于，它们有名称。**
   - 构造器缺点：一个类只能有一个带有指定签名的构造器，通过提供多个构造器，不同的参数列表。这并不是一个好的API，用户不知道该用哪个构造器。
   - 静态工厂方法优点：不受上述限制，当一个类需要多个带有签名的构造器时，用静态方法代替构造器（提供不同名称）。
2. **静态工厂方法与构造器不同的第二大优势在于，不必每次调用它们的时候都创建一个新的对象。**
   - 类似于享元(Flyweight)模式，避免创建不必要的重复对象。
   - 能够为重复的调用返回相同的对象，这样有助于类总能严格控制的某个时刻哪些实例应该存在，实例受控的类（instance-controlled）。
     - instance-controlled使得类可以确保它是一个 Singleton或者是不可实例化的。
     - instance-controlled使得不可变值类可以确保不会存在两个相等的实例，即当且仅当`a==b`时，`a.equals(b)`才为`ture`，这是享元模式的基础。
3. **静态工厂方法与构造器不同的第三大优势在于，它们可以返回原返回类型的任何子类型的对象。**
   - API可以返回对象，同时又不会使对象的类变成公有的（隐藏实现类会使API变得非常简洁）。这项技术适用于基于接口的框架。
4. **静态工厂方法与构造器不同的第四大优势在于，所返回对象的类可以随着每次调用而发生变化，这取决于静态工厂方法的参数值。**
   - 只要是已声明的返回类型的子类型，都是允许的。
5. **静态工厂方法与构造器不同的第五大优势在于，方法返回的对象所属的类，在编写包含该静态工厂方法类是可以不存在。**